<?
session_start();
session_register("DATA");

if ($_GET["zoom"]==1) {
	$im = imagecreatefrompng("../img/worldz.png");
	$zx=770/465;
	$zy=577/348;
}else{
	$im = imagecreatefrompng("../img/world.png");
	$zx=1;
	$zy=1;
}

$color[5]=imagecolorallocate($im,94,235,94);
$color[4]=imagecolorallocate($im,125,255,125);
$color[3]=imagecolorallocate($im,155,255,155);
$color[2]=imagecolorallocate($im,185,255,185);
$color[1]=imagecolorallocate($im,215,255,215);
$white=imagecolorallocate($im,255,255,255);
imagecolortransparent($im,$white);

$DATA=array(
"AE" => "290|180", "AF" => "304|166", "AL" => "248|156", "AM" => "278|157", "AO" => "245|223", 
"AQ" => "333|333>140|339>70|343", "AR" => "143|251", "AT" => "241|145", "AU" => "389|238>405|263", 
"AZ" => "282|157", "BA" => "245|151", "BD" => "335|180", "BE" => "229|139", "BF" => "221|194", 
"BG" => "254|154", "BJ" => "226|196", "BO" => "143|229", "BR" => "160|220", "BT" => "337|174", 
"BW" => "252|235", "BY" => "258|134", "CF" => "250|200", "CG" => "243|208", "CH" => "233|146", 
"CA" => "81|118>80|110>152|143>130|90>118|109>90|90>72|80>100|83>107|79>132|30>110|45>96|54>114|83>116|72>100|70>105|64>105|72>89|71>75|63>84|59>85|54>102|55>153|143", 
"CI" => "216|200", "CL" => "137|237", "CM" => "238|203", "CN" => "356|164", "CO" => "132|204", 
"CR" => "119|198", "CS" => "249|152", "CU" => "128|184", "CZ" => "241|141", "DE" => "236|139", 
"DK" => "235|128", "DO" => "135|106", "DZ" => "227|174", "EC" => "126|210", "EE" => "255|123", 
"EG" => "260|175", "EH" => "206|179", "ES" => "219|157", "ET" => "272|198", "FI" => "256|112", 
"FR" => "226|146", "GA" => "238|209", "GE" => "277|154", "GF" => "150|202", "GH" => "221|199", 
"GL" => "170|58", "GN" => "209|196", "GR" => "250|157", "GT" => "110|191", "GY" => "149|202", 
"HN" => "115|192", "HR" => "243|149", "HU" => "246|146", "IE" => "215|133", "IL" => "267|169", 
"IN" => "320|181", "IQ" => "277|167", "IR" => "289|168", "IS" => "200|108", "IT" => "236|149", 
"JO" => "269|169", "JP" => "395|163>400|152", "KE" => "270|208", "KG" => "316|155", "KH" => "353|194>349|184", "KP" => "380|157", 
"KR" => "382|163", "KZ" => "310|144", "LK" => "323|200", "LS" => "258|245", "LT" => "255|127", 
"LV" => "253|130", "LY" => "245|175", "MA" => "215|169", "MD" => "258|146", "MG" => "281|232", 
"MK" => "251|155", "ML" => "221|187", "MM" => "342|183", "MN" => "350|146", "MR" => "210|185", 
"MW" => "266|224", "MX" => "96|180", "MY" => "349|204>365|205", "MZ" => "270|226", "NA" => "244|235", 
"NE" => "235|187", "NG" => "232|197", "NI" => "117|194", "NL" => "229|137", "NO" => "235|115>246|52>252|46", 
"NP" => "326|174", "NZ" => "433|268>441|258", "OM" => "294|182", "PG" => "400|215", "PE" => "130|220", "PH" => "374|188", "PK" => "310|171", "PL" => "247|137", 
"PT" => "213|158", "PY" => "151|237", "RO" => "254|148", "SA" => "278|180", "SD" => "260|198", 
"RU" => "340|110>340|40>344|48>350|52>284|41>288|99>296|70>290|85>398|71>407|71>453|110>420|130>400|136>399|79>250|131>285|40", 
"SE" => "241|120", "SI" => "241|148", "SK" => "246|143", "SN" => "204|190", "SO" => "284|197", 
"SR" => "154|204", "SY" => "270|164", "SZ" => "262|241", "TD" => "246|190", "TH" => "349|190", 
"TJ" => "310|159", "TM" => "296|158", "TN" => "234|165", "TR" => "266|158", "UA" => "260|140", 
"UG" => "263|207", "UK" => "215|133>221|135", "US" => "35|105>100|160>144|149", "UY" => "153|250", 
"UZ" => "303|155", "VE" => "143|200", "VN" => "357|193", "YE" => "287|189", "YU" => "249|152", 
"ZA" => "252|210>252|245", "ZM" => "255|226", "ZW" => "260|232", "GB" => "221|135", "ID" => "350|210>365|210>372|211>356|217>363|218>395|213",
"TZ" => "265|215"
);

while (list($key, $val) = each($_GET)){
	if($key!="zoom" && $key!="L1" && $key!="L2" && $key!="L3" && $key!="L4" && $key!="L5" && $DATA[$key]!=""){
		$CRD=explode(">",$DATA[$key]);
		foreach($CRD as $k=>$v) {
		list($cx,$cy)=explode("|",$v);
		ImageFill($im, $cx*$zx, $cy*$zy, $color[$val]);
		}
	}
} 

header("Content-Type: image/png");
imagepng($im);
imagedestroy($im);
?>